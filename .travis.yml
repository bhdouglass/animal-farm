sudo: required
dist: trusty
services:
  - docker
cache:
  directories:
    - /var/cache/apt/archives
    - /var/tx-env
install:
  - sudo add-apt-repository ppa:bhdouglass/clickable -y
  - sudo apt-get update
  - sudo apt-get install clickable
  - clickable setup-docker
  - pip install virtualenv
  - virtualenv /var/tx-env
  - source /var/tx-env/bin/activate
  - pip install transifex-client
script:
  - clickable clean build click-build
after_success:
  - sudo echo $'[https://www.transifex.com]\nhostname = https://www.transifex.com\nusername = api\npassword = '"$TRANSIFEX_PASSWORD"' > ~/.transifexrc
  - tx push -s
